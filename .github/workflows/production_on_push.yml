name: production_on_push

on:
  push:
    branches:
      - main

jobs:
  production:
    uses: jalantechnologies/github-ci/.github/workflows/ci.yml@v1.0
    concurrency:
      group: ci-production-${{ github.event.ref }}
      cancel-in-progress: true
    with:
      app_name: boilerplate-mern
      app_env: production
      app_hostname: boilerplate-mern.platform.jalantechnologies.com
      branch: ${{ github.event.ref }}
      deploy_service: render
    secrets:
      render_token: ${{ secrets.RENDER_TOKEN }}
      render_service_id: ${{ secrets.RENDER_SERVICE_ID }}
      sonar_token: ${{ secrets.SONAR_TOKEN }}
      sonar_host_url: ${{ secrets.SONAR_HOST_URL }}
